import WidgetCommonPropertiesEditor from"./widget-common.editor.js";export default class WidgetRadioPropertiesEditor extends WidgetCommonPropertiesEditor{constructor(t){super(t),this._radioOptions=t.widget.radioOptions,this._savedRadioOptions=[...t.widget.radioOptions],this.chkHorizontalDisposition=this._dialogContainer.querySelector("#chkWidgetPropRadioHorizontal");var i=this;this.chkHorizontalDisposition&&this._callbacks.onHorizontalDispositionChanged&&this.chkHorizontalDisposition.addEventListener("change",(function(){i._callbacks.onHorizontalDispositionChanged(i,i.widget,this.checked)})),this._setupRadioOptions(),this._dialogContainer.querySelector('[data-action="add"]').addEventListener("click",(t=>{var i=this._addRadioOption();if(this._callbacks.onRadioOptionAdd){var e=this._callbacks.onRadioOptionAdd(this,this.widget,{title:"",value:""});i.setAttribute("data-id",e.id)}}))}init(){super.init(),this._updateControls()}_addRadioOption(t,i){t||(t=this._radioOptions.length+1);var e=this._dialogContainer.querySelector('[data-part="radio-options-container"]'),a=e.querySelector('.widget-radio-option[data-index="1"]').cloneNode(!0);a.setAttribute("data-index",t),a.setAttribute("data-id",""),i&&a.setAttribute("data-id",i.id);let o=a.querySelector('[data-part="radio-title"]');o.setAttribute("id",`txtRadioOptionTitle${t}`),o.value=i?i.title:"";let d=a.querySelector('[data-part="radio-value"]');return d.setAttribute("id",`txtRadioOptionValue${t}`),d.value=i?i.value:"",a.querySelector('[data-action="remove"]').removeAttribute("style"),e.appendChild(a),this._attachHandlers(a),a}_attachHandlers(t){t.querySelector('[data-action="remove"]').addEventListener("click",(i=>{if(confirm(Strings.WidgetEditor_Radio_Confirm_Remove_Option_Message)){t.remove();let i=t.getAttribute("data-id");this._callbacks.onRadioOptionRemove&&this._callbacks.onRadioOptionRemove(this,this.widget,i)}}));for(var i=["change","input"],e=0;e<i.length;e++)t.querySelector('[data-part="radio-title"]').addEventListener(i[e],(i=>{if(this._callbacks.onRadioOptionTitleChanged){let e=t.getAttribute("data-id");this._callbacks.onRadioOptionTitleChanged(this,this.widget,i.target.value,e)}})),t.querySelector('[data-part="radio-value"]').addEventListener(i[e],(i=>{if(this._callbacks.onRadioOptionValueChanged){let e=t.getAttribute("data-id");this._callbacks.onRadioOptionValueChanged(this,this.widget,i.target.value,e)}}))}_cancelDialogHandler(){super._cancelDialogHandler(),this.widget.radioOptions=this._savedRadioOptions}_setupRadioOptions(){for(var t=this._dialogContainer.querySelector('[data-part="radio-options-container"]'),i=0;i<this._radioOptions.length;i++){var e=i+1;if(e<=2){var a=this._radioOptions[i];let o=t.querySelector(`.widget-radio-option[data-index="${e}"]`);o.setAttribute("data-id",a.id),o.querySelector('[data-part="radio-title"]').value=this._radioOptions[i].title,o.querySelector('[data-part="radio-value"]').value=this._radioOptions[i].value,o.querySelector('[data-action="remove"]').setAttribute("style","display: none"),this._attachHandlers(o)}else this._addRadioOption(e,this._radioOptions[i])}}_updateControls(){super._updateControls()}}